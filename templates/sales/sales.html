{% extends "core/base.html" %}
{% load static %}

{% block title %}
<title>Sell</title>
{% endblock %}

{% block css %}
<link rel="stylesheet" type="text/css" href="{% static 'core/vendor/bootstrap/css/bootstrap.min.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'core/vendor/fontawesome/css/fontawesome.min.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'core/vendor/fontawesome/css/solid.min.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'core/vendor/jquery-ui/jquery-ui.min.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'core/css/sales.css' %}">
{% include 'core/notification_css_js.html' %}
{% endblock %}

{% block content %}
<div class="header">
    <div class="header-search">
        <div class="search-bar">
            <i class="fas fa-search hand"></i>
            <input type="search" placeholder="Tìm kiếm sản phẩm" oninput="search(this)">
            <div id="search-result" class="result" hidden>
            </div>
        </div>
    </div>
    <div class="tab-invoices px-3">
        <ul class="list-tab py-1">
            <li class="invoice hand">Hoá đơn 1<i class="fas fa-times ml-1"></i></li>
            <li class="invoice hand">Hoá đơn 2<i class="fas fa-times ml-1"></i></li>
            <li class="invoice hand">Hoá đơn 1<i class="fas fa-times ml-1"></i></li>
            <li class="invoice hand">Hoá đơn 2<i class="fas fa-times ml-1"></i></li>
            <li class="invoice hand">Hoá đơn 1<i class="fas fa-times ml-1"></i></li>
            <li class="invoice hand">Hoá đơn 2<i class="fas fa-times ml-1"></i></li>
            <li class="invoice hand">Hoá đơn 1<i class="fas fa-times ml-1"></i></li>
            <li class="invoice hand">Hoá đơn 2<i class="fas fa-times ml-1"></i></li>
        </ul>
    </div>
    <div class="header-right d-flex align-items-center justify-content-end">
        <div class=""></div>
        <div class="user hand ml-2 bg-hover">
            <i class="fas fa-user-circle"></i>
            <span class="username">hacker</span>
        </div>
        <div class="more hand ml-2 bg-hover"><i class="fas fa-bars"></i></div>
    </div>
</div>
<div class="sell-main d-flex">
    <div class="sell-left p-2">
        {% include 'sales/cart.html' %}
            <!-- <div class="product-item d-flex align-items-center px-2">
                <span class="remove-item ml-3 mr-4"><i class="fas fa-trash ml-1 hand"></i></span>
                <div class="product-item-data row w-100">
                    <div class="product-code col-2" data-toggle="tooltip" title="Mã sản phẩm: SP00002">SP00002</div>
                    <div class="product-name col-6" data-toggle="tooltip" title="Tên sản phẩm: Bim bim">Bim bim</div>
                    <div class="col-1">
                        <input class="product-quantity text-center w-100" type="number" min="0" value="10" title="Số lượng sản phẩm" data-toggle="tooltip">
                    </div>
                    <div class="product-price col-1 text-center" data-toggle="tooltip" title="Giá sản phẩm: 5000">5,000</div>
                    <div class="subtotal col-2 text-center">50000</div>
                </div>
            </div> -->
    </div>
    <div class="sell-right"></div>
</div>
{% endblock %}
{% block js %}
<script src="{% static 'core/vendor/jquery/jquery-3.5.1.min.js' %}"></script>
<script src="{% static 'core/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'core/vendor/bootstrap/js/bootstrap.min.js' %}"></script>
<script src="{% static 'core/vendor/jquery-ui/jquery-ui.min.js' %}"></script>
<script src="{% static 'core/vendor/js-validate/jquery.validate.min.js' %}"></script>
<script src="{% static 'core/js/sales.js' %}"></script>
<script type="text/javascript">
    function search(ele) {
        var search_val = $(ele).val();

        $.ajax({
            url: "{% url 'sales:search' %}",
            method: 'GET',
            data: {
                q: search_val
            },
            success: function(data) {
                $("#search-result").empty();
                $("#search-result").append(data);
                $("#search-result").attr("hidden", false);
            }
        })
    }

    function addProductItem(ele) {
        var input = $(ele).children()[0];
        console.log($(input).val());
        var pid = $(input).val();
        var cardId = 0;
        $.ajax({
            url: `/sales/cart/${cardId}/`,
            method: 'POST',
            headers: {'X-CSRFToken': '{{ csrf_token }}'},
            data: {
                productId: pid
            },
            success: function(data) {
                $('#cart').append(data);
            }
        });
    }

    $("body").click(function() {
        $('#search-result').attr("hidden", true);
    });

    $(document).ready(function() {
       $('[data-toggle="tooltip"]').tooltip();
    });
</script>
{% endblock %}