{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Vietname Smart Store</title>

    <!-- Bootstrap Core CSS -->
    <link href="{% static 'core/vendor/bootstrap/css/bootstrap.min.css'%}" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="{% static 'core/vendor/fontawesome/css/all.min.css' %}" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic"
          rel="stylesheet" type="text/css">
    <link href="{% static 'core/vendor/simple-line-icons/css/simple-line-icons.css' %}" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="{% static 'core/css/stylish-portfolio.css' %}" rel="stylesheet">
    {% include 'core/notification_css_js.html' %}
</head>

<body id="page-top">

<!-- Navigation -->
<a class="menu-toggle rounded" href="#">
    <i class="fas fa-bars"></i>
</a>
<nav id="sidebar-wrapper">
    <ul class="sidebar-nav">
        <li class="sidebar-brand">
            <a class="js-scroll-trigger" href="#page-top">Vietnam Smart Store</a>
        </li>
        <li class="sidebar-nav-item">
            <a class="js-scroll-trigger" href="#page-top">Trang chủ</a>
        </li>
        <li class="sidebar-nav-item">
            <a class="js-scroll-trigger" href="#about">Giới thiệu</a>
        </li>
        <li class="sidebar-nav-item">
            <a class="js-scroll-trigger" href="#services">Dịch vụ</a>
        </li>
    </ul>
</nav>

<!-- Header -->
<header class="masthead d-flex flex-column">
    <div class="header-top">
        <button class="btn my-3 btn-lg" style="background-color: #ffffffa1;"
                data-toggle="modal" data-target="#login-store">Đăng nhập</button></div>
    <div class="container text-center my-auto">
        <h1 class="mb-1">Vietnam Smart Store</h1>
        <h3 class="mb-5">
            <em>Phần mềm quản lý bán hàng chuyên nghiệp và hoàn toàn miễn phí</em>
        </h3>
        <a class="btn btn-primary btn-xl js-scroll-trigger" href="javascript:void(0)" onclick="showSignUp()">Tạo cửa
            hàng</a>
    </div>
    <div id="overlay" class="overlay py-5" style="display: none;">
        <div class="container mt-5">
            <div class="sign-up-box row">
                <div class="left col-md-6">
                    <div class="left-overlay"></div>
                </div>
                <div class="right col-md-6">
                    <div class="d-flex justify-content-end pt-2 pb-3">
                        <i id="cancel" class="fas fa-times fa-lg" title="Đóng"></i>
                    </div>
                    <form id="signup" action="{% url 'stores:store' %}" method="post" novalidate>
                        {% csrf_token %}
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <input type="text" class="form-control" placeholder="Họ" name="fname">
                            </div>
                            <div class="form-group col-md-6">
                                <input type="text" class="form-control" placeholder="Tên" name="lname">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="phone">Số điện thoại</label>
                                <input type="text" class="form-control" id="phone" name="phone"
                                       placeholder="Số điện thoại">
                            </div>
                            <div class="form-group col-md-6">
                                <label for="email">Email</label>
                                <input type="text" class="form-control" id="email" name="email" placeholder="Email">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="storeName">Tên cửa hàng</label>
                            <input type="text" class="form-control" placeholder="Tên cửa hàng" id="storeName"
                                   name="storeName">
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="username">Tên đăng nhập</label>
                                <input type="text" class="form-control" id="username" name="username"
                                       placeholder="Tên đăng nhập">
                            </div>
                            <div class="form-group col-md-6">
                                <label for="password">Mật khẩu</label>
                                <input type="password" class="form-control" id="password" name="password"
                                       placeholder="Mật khẩu">
                            </div>
                        </div>
                        <div class="d-flex justify-content-end py-2">
                            <button class="btn btn-success">Đăng ký <i class="fas fa-arrow-right ml-2"></i></button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</header>

<div class="modal fade" id="login-store">
    <div class="modal-dialog" style="max-width: 500px;">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title font-weight-bold">Nhập tên cửa hàng của bạn</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="form-store" action="" method="get">
                    <div class="form-group">
                        <label for="storeName">Tên cửa hàng</label>
                        <input type="text" class="form-control" name="storeName" required>
                    </div>
                    <button type="submit" class="btn btn-success mr-2 mw-110">
                        Vào cửa hàng
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- About -->
<section class="content-section bg-light" id="about">
    <div class="container text-center">
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <h2>Vietnam Smart Store - VSS là sự lựa chọn tuyệt vời cho việc quản lý bán hàng của bạn</h2>
                <p class="lead mb-5">VSS là phần mềm phổ biến với hơn 10.000 cửa hàng đang sử dụng. Đơn giản,
                    dễ dùng và tiết kiệm chi phí là những ưu điểm nổi bật VSS đem tới.
                </p>
                <a class="btn btn-dark btn-xl js-scroll-trigger" href="#services">Tìm hiểu thêm</a>
            </div>
        </div>
    </div>
</section>

<!-- Services -->
<section class="content-section bg-primary text-white text-center" id="services">
    <div class="container">
        <div class="content-section-heading">
            <h3 class="text-secondary mb-0">Dịch vụ, tiện ích</h3>
            <h2 class="mb-5">Chúng tôi đem tới</h2>
        </div>
        <div class="row">
            <div class="col-lg-3 col-md-6 mb-5 mb-lg-0">
          <span class="service-icon rounded-circle mx-auto mb-3">
            <i class="icon-people"></i>
          </span>
                <h4>
                    <strong>Đơn giản, dễ sử dụng</strong>
                </h4>
                <p class="text-faded mb-0">Nhân viên bán hàng chỉ mất 15 phút làm quen để bắt đầu bán hàng với VSS.
                    Giao diện đơn giản, thân thiện, thông minh giúp bạn triển khai quản lý bán hàng thật dễ dàng
                    và nhanh chóng.</p>
            </div>
            <div class="col-lg-3 col-md-6 mb-5 mb-lg-0">
          <span class="service-icon rounded-circle mx-auto mb-3">
<!--            <i class="icon-pencil"></i>-->
              <i class="fas fa-tasks"></i>
          </span>
                <h4>
                    <strong>Quản lý chuyên nghiệp</strong>
                </h4>
                <p class="text-faded mb-0">Hàng hoá được kiểm soát, lưu trữ trên hệ thống giúp cho việc theo dõi được
                    dễ dàng, chính xác hơn. Đơn giản trong quản lý nhân viên, hoá đơn mua bán, nhập xuất hàng</p>
            </div>
            <div class="col-lg-3 col-md-6 mb-5 mb-md-0">
          <span class="service-icon rounded-circle mx-auto mb-3">
<!--              <i class="icon-like"></i>-->
              <i class="icon-chart"></i>
          </span>
                <h4>
                    <strong>Phân tích, báo cáo</strong>
                </h4>
                <p class="text-faded mb-0">Chúng tôi ứng dụng các công nghệ phân tích xử lý dữ liệu để đưa ra các báo
                    cáo tổng quan, thống kê doanh thu, mặt hàng bán chạy... nhận định xu hướng, gợi ý chiến
                    lược kinh doanh giúp bạn quản lý cửa hàng tốt hơn</p>
            </div>
            <div class="col-lg-3 col-md-6">
          <span class="service-icon rounded-circle mx-auto mb-3">
<!--            <i class="icon-mustache"></i>-->
              <!--              <i class="fas fa-money-check-alt"></i>-->
              <i class="fas fa-dollar-sign"></i>
          </span>
                <h4>
                    <strong>Tiết kiệm chi phí</strong>
                </h4>
                <p class="text-faded mb-0">Miễn phí cài đặt, phí triển khai, nâng cấp và hỗ trợ.</p>
            </div>
        </div>
    </div>
</section>

<!-- Callout -->
<section class="callout">
    <div class="container text-center">
        <h2 class="mx-auto mb-5">Tham gia
            <em>ngay</em>
            cùng chúng tôi</h2>
        <a class="btn btn-primary btn-xl" href="#">Tham gia</a>
    </div>
</section>

<!-- Call to Action -->
<!--<section class="content-section bg-primary text-white">-->
<!--    <div class="container text-center">-->
<!--        <h2 class="mb-4">The buttons below are impossible to resist...</h2>-->
<!--        <a href="#!" class="btn btn-xl btn-light mr-4">Click Me!</a>-->
<!--        <a href="#!" class="btn btn-xl btn-dark">Look at Me!</a>-->
<!--    </div>-->
<!--</section>-->

<!-- Footer -->
<footer class="footer text-center">
    <div class="container">
        <ul class="list-inline mb-5">
            <li class="list-inline-item">
                <a class="social-link rounded-circle text-white mr-3" href="#!">
                    <i class="icon-social-facebook"></i>
                </a>
            </li>
            <li class="list-inline-item">
                <a class="social-link rounded-circle text-white mr-3" href="#!">
                    <i class="icon-social-twitter"></i>
                </a>
            </li>
            <li class="list-inline-item">
                <a class="social-link rounded-circle text-white" href="#!">
                    <i class="icon-social-github"></i>
                </a>
            </li>
        </ul>
        <p class="text-muted small mb-0">Vietnam Smart Store</p>
    </div>
</footer>

<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded js-scroll-trigger" href="#page-top">
    <i class="fas fa-angle-up"></i>
</a>

<!-- Bootstrap core JavaScript -->
<script src="{% static 'core/vendor/jquery/jquery-3.5.1.min.js' %}"></script>
<script src="{% static 'core/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'core/vendor/bootstrap/js/bootstrap.min.js' %}"></script>
<!-- Plugin JavaScript -->
<script src="{% static 'core/vendor/jquery-easing/jquery.easing.min.js' %}"></script>

<!-- Jquery validator -->
<script src="{% static 'core/vendor/js-validate/jquery.validate.min.js' %}"></script>

<!-- Custom scripts for this template -->
<script src="{% static 'core/js/stylish-portfolio.min.js' %}"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $("#cancel").click(function () {
            $("#overlay").fadeOut(500);
        });

        $("#signup").validate({
            rules: {
                phone: {
                    required: true,
                    vietnamesePhoneNumber: true
                },
                email: {
                    // required: true,
                    validEmail: true,
                },
                storeName: {
                    required: true,
                    noSpecialCharacter: true
                },
                username: {
                    required: true,
                    noSpecialCharacter: true,
                },
                password: {
                    required: true,
                    minLength: 6
                }
            },
            messages: {
                phone: {
                    required: "Cần nhập số điện thoại",
                    vietnamesePhoneNumber: "Số điện thoại không hợp lệ"
                },
                email: {
                    // required: "Cần nhập email của bạn",
                    validEmail: "Email không hợp lệ"
                },
                storeName: {
                    required: "Cần nhập tên cửa hàng",
                    noSpecialCharacter: "Chỉ được sử dụng kí tự chữ và số"
                },
                username: {
                    required: "Cần cung cấp tên đăng nhập",
                    noSpecialCharacter: "Chỉ được sử dụng kí tự chữ và số",
                },
                password: {
                    required: "Cần nhập mật khẩu",
                    minLength: "Mật khẩu phải có độ dài ít nhất 6 ký tự"
                }
            },
            errorElement: 'span',
            errorPlacement: function (error, element) {
                error.addClass('invalid-feedback');
                element.closest('.form-group').append(error);
            },
            highlight: function (element, errorClass, validClass) {
                $(element).addClass('is-invalid');
            },
            unhighlight: function (element, errorClass, validClass) {
                $(element).removeClass('is-invalid');
            }
        });

        $.validator.addMethod("noSpecialCharacter", function (value, element) {
            return this.optional(element) || /^[0-9a-zA-Z]+$/.test(value);
        });

        $.validator.addMethod('vietnamesePhoneNumber', function (value, element) {
            return this.optional(element) || /(03|05|07|08|09|01[2|6|8|9])+([0-9]{8})\b/.test(value);
        });

        $.validator.addMethod('validEmail', function (value, element) {
            return this.optional(element) || /^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(value);
        });

        $.validator.addMethod('minLength', function (value, element, params) {
            return this.optional(element) || value.length >= params;
        });

        $("#signup").submit(function (e) {
            e.preventDefault();
            var form = $(this);
            if (!form.valid()) return;

            var formData = new FormData(form[0]);
            var url = form.attr('action');
            $.ajax({
                url: url,
                method: "POST",
                data: formData,
                processData: false,
                contentType: false,
                success: function (data) {
                    if (data.status == "success") {
                        successNotification({
                            title: "Đăng ký thành công",
                        });
                        $("#overlay").fadeOut(500);
                        form[0].reset();
                    } else {
                        errorNotification({
                            title: "Lỗi",
                            message: data.msg
                        });
                    }
                },
                error: function () {
                    errorNotification({
                        title: "Xảy ra lỗi",
                    });
                }
            });

        });

        $("#form-store").submit(function(e) {
            e.preventDefault();
            var form = $(this);

            if (!form.valid()) return;

            $.ajax({
                url: `${form.serializeArray()[0].value}/`,
                method: 'GET',
                success: function (data) {
                    if (data.status == "success") {
                        window.location.replace(`${data.url}?next=/${data.store_name}/dashboard/`);
                    } else {
                        errorNotification({
                            title: "Lỗi",
                            message: data.msg
                        });
                    }
                },
                error: function () {
                    errorNotification({
                        title: "Xảy ra lỗi",
                    });
                }
            });
         });
    });

    function showSignUp() {
        $("#overlay").fadeIn(500);
    }
</script>
</body>
</html>